<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daftar Artikel Otomatis - Kang Ruli</title>
    <style>
        body { font-family: -apple-system, system-ui, sans-serif; line-height: 1.6; max-width: 800px; margin: 0 auto; padding: 20px; background-color: #f4f4f9; }
        h1 { color: #333; border-bottom: 2px solid #007bff; padding-bottom: 10px; }
        .article-card { background: white; margin-bottom: 15px; padding: 15px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); list-style: none; }
        .article-card a { text-decoration: none; color: #007bff; font-weight: bold; font-size: 1.2rem; }
        .article-card a:hover { text-decoration: underline; }
        .date { font-size: 0.8rem; color: #777; display: block; margin-top: 5px; }
        #loading { text-align: center; font-style: italic; color: #666; margin-top: 50px; }
    </style>
</head>
<body>

    <h1>Arsip Artikel Kang Ruli</h1>
    <div id="loading">Sedang mengambil data dari blog...</div>
    <ul id="article-list"></ul>

    <script>
        const blogUrl = "https://www.kangruli.web.id/feeds/posts/default?alt=json&max-results=5000";
        // Menggunakan proxy AllOrigins untuk bypass CORS
        const proxyUrl = `https://api.allorigins.win/get?url=${encodeURIComponent(blogUrl)}`;

        async function fetchArticles() {
            try {
                const response = await fetch(proxyUrl);
                if (!response.ok) throw new Error("Gagal akses proxy");
                
                const wrapper = await response.json();
                const data = JSON.parse(wrapper.contents); // Data asli Blogger ada di dalam wrapper.contents
                const entries = data.feed.entry;
                
                const listContainer = document.getElementById('article-list');
                const loadingText = document.getElementById('loading');

                loadingText.style.display = 'none';

                if (!entries) {
                    listContainer.innerHTML = "<li>Tidak ada artikel ditemukan.</li>";
                    return;
                }

                entries.forEach(entry => {
                    const title = entry.title.$t;
                    const link = entry.link.find(l => l.rel === 'alternate').href;
                    const pubDate = new Date(entry.published.$t).toLocaleDateString('id-ID', {
                        day: 'numeric', month: 'long', year: 'numeric'
                    });

                    const li = document.createElement('li');
                    li.className = 'article-card';
                    li.innerHTML = `
                        <a href="${link}" target="_blank">${title}</a>
                        <span class="date">Dipublikasikan pada: ${pubDate}</span>
                    `;
                    listContainer.appendChild(li);
                });
            } catch (error) {
                console.error("Error:", error);
                document.getElementById('loading').innerHTML = 
                    "<p style='color:red;'>Gagal memuat data. Silakan coba refresh halaman.</p>";
            }
        }

        fetchArticles();
    </script>
</body>
</html>
